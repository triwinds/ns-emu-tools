# Change Log

## 0.4.2

- 安装模拟器时不再提前检查目录是否被占用 (#69)(#70)
- 回退 PyInstaller 至 5.10.1 版本
- 延长固件信息接口的超时时间
- 移除失效的 GitHub 镜像

## 0.4.1

- 添加固件安装前的提示
- 安装模拟器时不再自动关闭启动中的模拟器 (目录被其它程序占用时中止安装)
- 新增 yuzu 存档备份功能 (#57)
- 修复当系统缩放不为 100% 时，保存的窗口大小不正确的问题 (#58)
- 修复当系统设置为 IPv6 优先时无法打开页面的问题 & 文档更新. by @RivenNero

## 0.4.0

- 当 webview 模式长时间未能启动后自动切换至浏览器模式 (#47)(#48)
- 记录窗口大小 (#50)
- 修复检测不到 yuzu/ryujinx 窗口的问题 (#51) Thanks @RonaldinhoL
- 允许手动设置 HTTP 代理服务器 (#52)
- pywebview 回退至 4.0.2

## 0.3.9

- 自动更新时确保之前的进程已经被关闭 (#41)
- 安装固件时展示具体安装的路径 (#42)
- 金手指管理中添加全选/反选的按钮 (#42)
- 路径选择中添加删除按钮 (#43)
- aria2 启动失败时尝试重新启动 (#44)
- 当 Yuzu/Ryujinx 的安装包无法正常解压时自动删除下载的文件，并提示重新下载 (#45)
- 移除/更新已经失效的链接

## 0.3.8

- 添加展示 yuzu 最近提交记录的按钮
- Edge 浏览器模式启动失败时自动回退至默认浏览器
- 重构 GitHub 下载源相关代码 & 移除失效的下载源

## 0.3.7

- 修复 Ryujinx 固件安装失败时会删除原有固件的问题 (#36)
- 一些样式调整

## 0.3.6

- 对于一些不经常发生变更的数据使用持久化缓存
- 更新 ffhome 的链接
- 一些样式与描述调整
- 在列表中显示金手指文件里面以 {} 包裹的内容

## 0.3.5

- 打开金手指管理界面时异步加载游戏信息
- DoH 查询时复用已建立的连接
- 一些 bug 修复及错误信息调整

## 0.3.4

- 调整 Edge 浏览器的检测逻辑
- 调整 requests cache 的缓存后端
- 重构金手指文件的解析逻辑
- 修复非 UTF-8 编码的金手指文件打开报错的问题

## 0.3.3

- 修复当文件已存在时下载报错的问题
- 修复 Ryujinx 在正式版/AVA分支切换后由于版本相同导致无法开始下载的问题

ps. 由于现在的 Ryujinx 正式版还不支持中文，因此从 AVA / LDN 分支切换过去后，可能会出现因为配置文件冲突导致模拟器打不开的问题。如果您需要使用不同分支的模拟器，建议新建文件夹分开存放。

## 0.3.2

- 在安装过程中阻止关闭控制台对话框, 以免出现奇怪的问题
- 调整下载逻辑, 允许在下载过程中暂停或中断下载任务
- 更新 requests-cache/pyinstaller 等一些依赖的版本

## 0.3.1

- 调整浏览器的兼容范围, 修复某些老版本浏览器白屏的问题
  - 最低需要支持 es6 的浏览器, 一般在 2016 年之后发布的浏览器都支持
- 修复固件 md5 校验失败时没有自动删除相应 zip 包的问题
- 修复非简体中文的系统环境中自动更新失败的问题
- 调整 Ryujinx 的安装逻辑: 安装时只移除 Ryujinx*.exe 文件, 其余文件使用覆盖模式
- 更新 CloudflareSpeedTest 版本至 v2.2.2 , 并修复了一些问题

## 0.3.0

- 在 api 请求发生超时错误时进行重试
- 当 IPv6 启用时 DoH 尝试查询 AAAA 记录
- 安装固件时对下载文件的 md5 进行校验
- 修复某些情况下 aria2 进程没有正常关闭的问题
- 更正检测固件版本时固件文件解密失败的错误文本
- 修复某些代理软件错误配置 localhost 代理导致无法调用 aria2 api 的问题

## 0.2.9

- 添加新 GitHub 下载源 nuaa.cf, 并更新在其它 GitHub 下载源中使用的 UA
- 更正尝试下载一个不存在的 Ryujinx 版本时所展示的文本
- 集成 sentry sdk 收集异常信息 (可通过 `--no-sentry` 启动参数将其禁用)
- 使 DNS 缓存遵循返回的 ttl 设定
- 当 yuzu/ryujinx/固件 版本检测失败时, 将记录中的版本号重置为 `未知`

ps. 目前 Ryujinx LDN 只能下载 3.0.1 及之后的版本。如果需要更久之前的版本，请前往 Ryujinx 官网下载。

## 0.2.8

- 调整 ui 启动逻辑
- 启动后自动创建 `切换 UI 启动模式.bat` 用于切换启动模式
- 添加启动参数 `--switch-mode` 用于切换启动模式

## 0.2.7

- 优化 CloudflareST 授权流程，仅在写入 hosts 时请求管理员权限
- 修复在 windowed 打包方式下 CloudflareST 控制台显示不正常的问题
- 访问 api 时默认启用 DNS over HTTPS (可在设置中关闭)
- 指定 aria2 使用 Aliyun / DNSPod 的 DNS 服务器
- 修复因路径大小写原因误删 Ryujinx 的 portable 文件夹的问题 (#23)
- 合并 webview 进入 main.py

## 0.2.6

- 新增试验性功能: Cloudflare 节点选优
- 修复 yuzu mod 文件夹路径获取错误的问题 (#19)
- 新增模拟器路径的历史记录 (#20)

## 0.2.5

- webview 版本增加运行前环境检测，并自动下载缺失的组件
- 替换不安全的 Unicode decode 方式
- 新增配置项: 在启动 aria2 前自动删除旧的日志
- 更新 UA 标识
- 添加 `其它资源` 页面

ps. 现在的 webview 版本应该可以在没安装过 Microsoft Edge WebView2 的系统中运行了.
如果您之前遇到过 webview 版本打不开的问题, 可以试试这个版本, 还有问题的话可以在 issue 中反馈.

## 0.2.4

- 新增对 Ryujinx LDN 版本的支持 (#5)
- 当 eel websocket 断开后在界面提示重启程序 (#16)
- nodejs 版本更新至 18, 更新前端相关依赖的版本

## 0.2.3

- 新增自动更新功能 (建议使用 webview 版本)
- 当直连 GitHub api 出现问题时尝试使用 CDN 进行重试
- `设置` 页面中新增开关 aria2 ipv6 的选项
- `About` 页面中新增查看 更新日志 的按钮
- `Ryujinx` 页面中新增查看 更新日志 的按钮
- 更新缓存配置, 根据 HTTP 响应中的 Cache Control 进行缓存

### 关于 webview 版本

由于 js/css 语法的兼容性问题, 一些浏览器上可能无法正确展示页面, 所以这里提供一个使用 webview 打包的版本。

这个版本不依赖于用户环境中的浏览器, 而是使用 [Microsoft Edge WebView2](https://developer.microsoft.com/en-us/microsoft-edge/webview2/)
打开界面, 这个组件已经预置在较新版本的系统当中(通过 Windows Update 推送), 因此这些系统无需进行额外下载。如果你的系统中没有这个组件,
可以从 [这里](https://developer.microsoft.com/zh-cn/microsoft-edge/webview2/#download-section) 下载。

此外, 由于浏览器的安全限制, 程序无法主动关闭打开的浏览器页面, 因此只有 webview 版本能在更新时自动关闭打开的窗口,
其余版本则需要手动关闭之前打开的页面。

## 0.2.2-fix

- 修复未能正确转义 Yuzu 配置中的 Unicode 字符的问题 (#11)

## 0.2.2

- 修复无法识别 Yuzu 自定义 nand/load 目录的问题 (#9)
- 保存选择的主题 (#10)
- 修复金手指文件使用大写后缀名时无法识别的问题

## 0.2.1

- 更新 Edge 的检测机制，在无法检测到 Edge 时将尝试使用默认浏览器启动
- 添加命令行启动参数，支持选择启动的浏览器 (chrome, edge, user default)
  - 例如强制使用默认浏览器启动 `NsEmuTools.exe -m "user default"`
- 添加 常见问题 页面
- 设置中添加更多的 GitHub 下载源选项
- 更换游戏数据源
- 修复 Yuzu 路径有特殊字符时无法检测版本的问题
- 设置中添加选项，允许保留下载的文件 (#4)

## 0.2.0

- 新增 Yuzu 金手指管理功能
- 调整 aria2p 连接参数以修复某些情况下 aria2 接口调用失败的问题
- 修复含有特殊字符路径时命令行无法执行的问题
- 在修改模拟器目录时展示警告信息

## 0.1.9

- aria2 禁用 ipv6
- 新增网络设置相关选项
- 添加 requests-cache 用于本地缓存 api 结果

## 0.1.8

- 修复 windowed 打包方式无法正常启动 Edge 浏览器的问题

## 0.1.7

- 基于 Vuetify 构建的新 UI
- 添加 msvc 的代理源
- 修复 Ryujinx 切换分支后由于版本相同导致无法开始下载的问题
- 调整浏览器默认使用顺序: Chrome > Edge > User Default
